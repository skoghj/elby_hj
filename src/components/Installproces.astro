---
---

<div class="bg-sec_be-500 flex flex-col items-center justify-center py-xl overflow-x-hidden relative">
  <div class="mx-auto text-center mb-md">
    <h2>Sådan er processen med Elby</h2>
  </div>

  <div class="relative w-full max-w-[1400px] px-6 sm:px-10 md:px-14 lg:px-20">
    <!-- 좌측 화살표 -->
    <button
      id="prevBtn"
      class="absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-neu_db-900/40 text-white rounded-full w-9 h-9 flex items-center justify-center hover:bg-neu_db-900/60 transition"
    >
      &#8592;
    </button>

    <!-- 슬라이드 뷰포트 -->
    <div id="sliderViewport" class="overflow-hidden relative">
      <div
        id="sliderTrack"
        class="flex transition-transform duration-500 ease-in-out will-change-transform space-x-5 sm:space-x-6 md:space-x-8"
      >
        <!-- 카드 6개 (내용 그대로 유지) -->
        <div class="card-item flex flex-col flex-shrink-0 bg-primary-50 shadow-md rounded-none p-4 sm:p-5 md:p-6 lg:p-8 overflow-hidden">
          <p class="text-body-sm font-bold mb-2">01</p>
          <p class="text-body-lg font-bold mb-3">Kontakt</p>
          <p class="text-body-sm">
            Vi starter med en snak for at afklare jeres behov og muligheder for en ladeløsning.
          </p>
        </div>

        <div class="card-item flex flex-col flex-shrink-0 bg-primary-50 shadow-md rounded-none p-4 sm:p-5 md:p-6 lg:p-8 overflow-hidden">
          <p class="text-body-sm font-bold mb-2">02</p>
          <p class="text-body-lg font-bold mb-3">Ejendomsvurdering</p>
          <p class="text-body-sm">
            Vi vurderer bygning og el-infrastruktur og planlægger en smart, effektiv installation sammen med jer.
          </p>
        </div>

        <div class="card-item flex flex-col flex-shrink-0 bg-primary-50 shadow-md rounded-none p-4 sm:p-5 md:p-6 lg:p-8 overflow-hidden">
          <p class="text-body-sm font-bold mb-2">03</p>
          <p class="text-body-lg font-bold mb-3">Installation</p>
          <p class="text-body-sm">
            Vi monterer ladestik i facaden og skjuler kablerne i vores unikke fortovsskinne – uden omkostninger for jer.
          </p>
        </div>

        <div class="card-item flex flex-col flex-shrink-0 bg-primary-50 shadow-md rounded-none p-4 sm:p-5 md:p-6 lg:p-8 overflow-hidden">
          <p class="text-body-sm font-bold mb-2">04</p>
          <p class="text-body-lg font-bold mb-3">Vedligeholdelse</p>
          <p class="text-body-sm">
            Vi sørger for drift, service og vedligeholdelse, så I altid har en løsning, der virker – uden besvær.
          </p>
        </div>

        <div class="card-item flex flex-col flex-shrink-0 bg-primary-50 shadow-md rounded-none p-4 sm:p-5 md:p-6 lg:p-8 overflow-hidden">
          <p class="text-body-sm font-bold mb-2">05</p>
          <p class="text-body-lg font-bold mb-3">Brugeradgang</p>
          <p class="text-body-sm">
            Beboere bruger vores app til opladning, forbrugsaflæsning og betaling – nemt og overskueligt.
          </p>
        </div>

        <div class="card-item flex flex-col flex-shrink-0 bg-primary-50 shadow-md rounded-none p-4 sm:p-5 md:p-6 lg:p-8 overflow-hidden">
          <p class="text-body-sm font-bold mb-2">06</p>
          <p class="text-body-lg font-bold mb-3">Indtægtsdeling</p>
          <p class="text-body-sm">
            Ejendommen får del i opladningsindtægterne – en grøn løsning med økonomisk gevinst.
          </p>
        </div>
      </div>
    </div>

    <!-- 우측 화살표 -->
    <button
      id="nextBtn"
      class="absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-neu_db-900/40 text-white rounded-full w-9 h-9 flex items-center justify-center hover:bg-neu_db-900/60 transition"
    >
      &#8594;
    </button>

    <!-- 도트 (고정 6개) -->
    <div id="dots" class="flex justify-center mt-6 space-x-2"></div>
  </div>

  <script>
    (function () {
      const track = document.getElementById("sliderTrack");
      const prev = document.getElementById("prevBtn");
      const next = document.getElementById("nextBtn");
      const dotsWrap = document.getElementById("dots");
      const cards = Array.from(track.children);
      const totalCards = cards.length;
      let index = 0;

      // 화면별 카드 수
      function getVisible() {
        const w = window.innerWidth;
        if (w >= 1024) return 4; // 데스크탑
        if (w >= 768) return 2; // 아이패드
        return 1; // 모바일
      }

      // 카드 폭 계산
      function updateCardWidths() {
        const visible = getVisible();
        const gap = 20;
        const containerWidth = document.getElementById("sliderViewport").offsetWidth;
        const cardWidth = (containerWidth - gap * (visible - 1)) / visible;
        cards.forEach((c) => (c.style.width = cardWidth + "px"));
      }

      // 도트 항상 6개 고정
      function buildDots() {
        dotsWrap.innerHTML = "";
        for (let i = 0; i < totalCards; i++) {
          const dot = document.createElement("button");
          dot.className = "dot w-3 h-3 rounded-full bg-neu_db-400 transition";
          dot.dataset.index = i;
          dot.addEventListener("click", () => goTo(i));
          dotsWrap.appendChild(dot);
        }
        updateDots();
      }

      // 도트 색상 업데이트
      function updateDots() {
        dotsWrap.querySelectorAll(".dot").forEach((d, i) => {
          d.classList.toggle("bg-acc_yel-700", i === index);
          d.classList.toggle("bg-neu_db-400", i !== index);
        });
      }

      // 이동 함수
      function goTo(i, animate = true) {
        const visible = getVisible();
        index = (i + totalCards) % totalCards; // 루프 (음수 → 끝으로)
        const cardWidth = cards[0].offsetWidth + 20;
        track.style.transitionDuration = animate ? "500ms" : "0ms";
        track.style.transform = `translateX(-${index * cardWidth}px)`;
        updateDots();
      }

      // 화살표 클릭 (루프)
      prev.addEventListener("click", () => goTo(index - 1));
      next.addEventListener("click", () => goTo(index + 1));

      // 초기화
      function setup() {
        updateCardWidths();
        buildDots();
        goTo(0, false);
      }

      setup();
      window.addEventListener("resize", setup);
    })();
  </script>
</div>
